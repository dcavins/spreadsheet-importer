/*! cares-spreadsheet-importer - v1.0.0 - 2017-02-01 */!function(a){"use strict";function b(){console.log("fetch editors!"),a("#add-editor").val()&&(a("#add-editor").attr("disabled",!0),a.ajax({url:CARES_Spreadsheets_Edit.ajax_url,method:"POST",data:{action:"cds_search_possible_editors",search:a("#add-editor").val(),post_id:a("#post-id").val(),_wpnonce:CARES_Spreadsheets_Edit.nonce}}).done(function(b){console.log(b),a("#add-editor").attr("disabled",!1)}))}console.log("running it");var c=a("table.data-set-edit"),d=a(".export-data"),e=a("#exported-data");a(".add-row").click(function(){var a=c.find("tr.hidden").clone(!0).removeClass("hidden table-line").attr("hidden",!1);c.append(a)}),c.on("click",".remove-row",function(){console.log("removing row!"),a(this).parents("tr").remove()}),jQuery.fn.pop=[].pop,jQuery.fn.shift=[].shift,d.click(function(){var b=c.find("tr:not(:hidden)"),d=[],f=[];a(b.shift()).find("th:not(:empty)").each(function(){d.push(a(this).text().toLowerCase())}),b.each(function(){var b=a(this).find("td:not(.row-actions)"),c={};d.forEach(function(a,d){c[a]=b.eq(d).text()}),f.push(c)});var g=JSON.stringify(f);e.text(g);var h=CARES_Spreadsheets_Edit.root+"wp/v2/cares_data_set/"+a("#post-id").val();console.log(h),a.ajax({url:h,method:"POST",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",CARES_Spreadsheets_Edit.nonce)},data:{content:g}}).done(function(a){console.log(a)})});var f=0;a("#add-editor").keyup(function(){clearTimeout(f),f=setTimeout(b,500)})}(jQuery);